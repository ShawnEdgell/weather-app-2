{"version":3,"file":"index-871a2017.js","sources":["../../src/app.js"],"sourcesContent":["const API_BASE_URL = \"https://api.weatherapi.com/v1/forecast.json\";\nconst API_KEY = \"219a015ee939448aa0f195825231010\"; // Replace with your WeatherAPI API key\n\nlet currentPage = 1;\n\ndocument.getElementById(\"weatherForm\").addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    document.getElementById(\"errorMsg\").style.display = \"none\";\n    document.getElementById(\"loading\").style.display = \"block\";\n\n    const location = document.getElementById(\"locationInput\").value.trim();\n\n    try {\n        const data = await fetchData(location);\n        const processedData = processWeatherData(data);\n        updateUI(processedData);\n        currentPage = 1; // Reset to the first page when new data is loaded\n\n        // Fetch and update the 7-day forecast for the new location\n        const forecastData = await fetch7DayForecast(location);\n        update7DayForecast(forecastData);\n\n        // Update date, time, and location based on the new location\n        updateDateAndTime(location);\n    } catch (error) {\n        document.getElementById(\"errorMsg\").innerText = error;\n        document.getElementById(\"errorMsg\").style.display = \"block\";\n    } finally {\n        document.getElementById(\"loading\").style.display = \"none\";\n    }\n});\n\n(async () => {\n    // No default location used here\n})();\n\nconst fetchData = async (location) => {\n    const url = `${API_BASE_URL}?key=${API_KEY}&q=${location}&days=1&aqi=no&alerts=no`;\n\n    try {\n        const response = await fetch(url);\n        const data = await response.json();\n\n        if (data.error) {\n            throw new Error(data.error.message);\n        }\n\n        return data;\n    } catch (error) {\n        console.error(`Error fetching data for ${location}: ${error.message}`);\n        throw error;\n    }\n};\n\nconst fetch7DayForecast = async (location) => {\n    try {\n        const response = await fetch(\n            `https://api.weatherapi.com/v1/forecast.json?key=${API_KEY}&q=${location}&days=7&aqi=no&alerts=no`\n        );\n        if (!response.ok) {\n            throw new Error('Unable to fetch 7-day forecast data.');\n        }\n        const data = await response.json();\n        return data.forecast.forecastday;\n    } catch (error) {\n        throw error;\n    }\n};\n\nconst update7DayForecast = (forecastData) => {\n    const forecastContainer = document.querySelector('.seven-day-forecast');\n    forecastContainer.innerHTML = '';\n\n    forecastData.forEach((day) => {\n        const forecastElement = document.createElement('div');\n        forecastElement.classList.add('forecast-day');\n\n        const date = new Date(day.date);\n        const dayOfWeek = date.toLocaleDateString('en-US', { weekday: 'long' });\n        const iconUrl = day.day.condition.icon;\n        const maxTemp = day.day.maxtemp_c;\n        const minTemp = day.day.mintemp_c;\n\n        forecastElement.innerHTML = `\n            <div class=\"forecast-day-icon\">\n                <img src=\"${iconUrl}\" alt=\"Weather Icon\">\n            </div>\n            <div class=\"forecast-day-info\">\n                <div class=\"forecast-day-name\">${dayOfWeek}</div>\n                <div class=\"forecast-day-temp\">${maxTemp}°C / ${minTemp}°C</div>\n            </div>\n        `;\n\n        forecastContainer.appendChild(forecastElement);\n    });\n};\n\nconst processWeatherData = (data) => {\n    const current = data.current;\n    const forecast = data.forecast.forecastday[0]; // Assuming you want data for the first day\n\n    return {\n        location: `${data.location.name}`,\n        temperature: current.temp_c,\n        feelsLike: current.feelslike_c,\n        uv: current.uv,\n        description: current.condition.text,\n        humidity: current.humidity,\n        windSpeed: current.wind_kph,\n        icon: current.condition.icon,\n        daily_chance_of_rain: forecast.day.daily_chance_of_rain,\n        daily_chance_of_snow: forecast.day.daily_chance_of_snow,\n        hourly_forecast: forecast.hour,\n    };\n};\n\nconst updateUI = (data) => {\n    document.getElementById(\"location\").textContent = data.location;\n    document.getElementById(\"temperature\").textContent = `${data.temperature}°C`;\n    document.getElementById(\"feelsLikeValue\").textContent = `${data.feelsLike}°C`;\n    document.getElementById(\"uvIndexValue\").textContent = data.uv;\n    document.getElementById(\"description\").textContent = data.description;\n    document.getElementById(\"humidityValue\").textContent = `${data.humidity}%`;\n    document.getElementById(\"windSpeedValue\").textContent = `${data.windSpeed} kph`;\n    document.getElementById(\"icon\").setAttribute(\"src\", data.icon);\n\n    formatDateAndTime();\n    displayHourlyForecast(data.hourly_forecast);\n\n    document.getElementById(\"rainValue\").textContent = `${data.daily_chance_of_rain}%`;\n    document.getElementById(\"snowValue\").textContent = `${data.daily_chance_of_snow}%`;\n};\n\nconst formatDateAndTime = () => {\n    const currentDate = new Date();\n    const optionsForDate = { year: 'numeric', month: 'long', day: 'numeric' };\n    const dateString = currentDate.toLocaleDateString('en-US', optionsForDate);\n\n    let hours = currentDate.getHours();\n    const minutes = currentDate.getMinutes();\n    const ampm = hours >= 12 ? 'pm' : 'am';\n    hours = hours % 12;\n    hours = hours ? hours : 12;\n\n    const timeString = `${hours}:${minutes < 10 ? '0' + minutes : minutes}${ampm}`;\n\n    document.getElementById('currentDate').textContent = `currentDate: ${dateString}`;\n    document.getElementById('currentTime').textContent = `currentTime: ${timeString}`;\n};\n\nconst displayHourlyForecast = (hourlyForecast) => {\n    const forecastContainer = document.getElementById('hourlyForecast');\n    forecastContainer.innerHTML = '';\n\n    // Get the current date and time\n    const currentDate = new Date();\n    const currentHour = currentDate.getHours();\n    const currentMinute = currentDate.getMinutes();\n\n    // Calculate the next hour based on the current time\n    let nextHour = currentHour + 1;\n    if (currentMinute < 1) {\n        nextHour = currentHour;\n    }\n\n    hourlyForecast.forEach((hour) => {\n        // Check if the hour matches the nextHour\n        const hourTimestamp = hour.time_epoch * 1000;\n        const hourDate = new Date(hourTimestamp);\n        const hourValue = hourDate.getHours();\n\n        // Only display forecast data for the next hour and beyond\n        if (hourValue >= nextHour) {\n            const hourElement = document.createElement('div');\n            hourElement.classList.add('hourly-forecast-item');\n\n            // Create an <img> element for the weather icon\n            const iconImg = document.createElement('img');\n            iconImg.setAttribute('src', hour.condition.icon);\n            iconImg.setAttribute('alt', 'Weather Icon');\n\n            // Format the time as HH:MM AM/PM\n            const formattedTime = `${hourValue % 12}:${hourValue % 12 === 0 ? '00' : '00'} ${hourValue >= 12 ? 'PM' : 'AM'}`;\n\n            // Create a <span> element for time\n            const timeSpan = document.createElement('span');\n            timeSpan.textContent = formattedTime;\n\n            // Create a <span> element for temperature\n            const temperatureSpan = document.createElement('span');\n            temperatureSpan.textContent = `${hour.temp_c}°C`;\n\n            // Append the icon, time, and temperature to the hourElement\n            hourElement.appendChild(iconImg);\n            hourElement.appendChild(timeSpan);\n            hourElement.appendChild(temperatureSpan);\n\n            // Append the hourly forecast item to the container\n            forecastContainer.appendChild(hourElement);\n\n            // Increment nextHour for the next iteration\n            nextHour++;\n        }\n    });\n};\n\n// Get the radio buttons and forecast content element\nconst dailyRadio = document.getElementById(\"daily\");\nconst hourlyRadio = document.getElementById(\"hourly\");\nconst forecastContent = document.getElementById(\"forecast-content\");\n\n// Add event listeners to the radio buttons\ndailyRadio.addEventListener(\"change\", () => {\n    forecastContent.classList.remove(\"show-hourly\");\n});\n\nhourlyRadio.addEventListener(\"change\", () => {\n    forecastContent.classList.add(\"show-hourly\");\n});\n\nconst updateDateAndTime = (location) => {\n    // Fetch data for the selected location to get its current time\n    fetch(`https://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${location}`)\n    .then((response) => response.json())\n    .then((data) => {\n        const date = new Date(data.location.localtime);\n        const optionsForDate = { year: 'numeric', month: 'long', day: 'numeric' };\n        const dateString = date.toLocaleDateString('en-US', optionsForDate);\n\n        let hours = date.getHours();\n        const minutes = date.getMinutes();\n        const ampm = hours >= 12 ? 'pm' : 'am';\n        hours = hours % 12;\n        hours = hours ? hours : 12;\n\n        const timeString = `${hours}:${minutes < 10 ? '0' + minutes : minutes} ${ampm}`;\n\n        document.getElementById('currentDate').textContent = `${dateString}`;\n        document.getElementById('currentTime').textContent = `${timeString}`;\n    })\n    .catch((error) => {\n        console.error(`Error fetching date and time data for ${location}: ${error.message}`);\n    });\n};\n"],"names":["API_KEY","currentPage","document","getElementById","addEventListener","async","event","preventDefault","style","display","location","value","trim","data","fetchData","processedData","processWeatherData","updateUI","forecastData","fetch7DayForecast","update7DayForecast","updateDateAndTime","error","innerText","url","response","fetch","json","Error","message","console","ok","forecast","forecastday","forecastContainer","querySelector","innerHTML","forEach","day","forecastElement","createElement","classList","add","dayOfWeek","Date","date","toLocaleDateString","weekday","iconUrl","condition","icon","maxTemp","maxtemp_c","minTemp","mintemp_c","appendChild","current","name","temperature","temp_c","feelsLike","feelslike_c","uv","description","text","humidity","windSpeed","wind_kph","daily_chance_of_rain","daily_chance_of_snow","hourly_forecast","hour","textContent","setAttribute","formatDateAndTime","displayHourlyForecast","currentDate","dateString","year","month","hours","getHours","minutes","getMinutes","ampm","timeString","hourlyForecast","currentHour","currentMinute","nextHour","hourTimestamp","time_epoch","hourValue","hourElement","iconImg","formattedTime","timeSpan","temperatureSpan","dailyRadio","hourlyRadio","forecastContent","remove","then","localtime","catch"],"mappings":"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"}